<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.2.228/pdf.min.js"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta2/css/all.min.css" integrity="sha512-YWzhKL2whUzgiheMoBFwW8CKV4qpHQAEuvilg9FAn5VJUDwKZZxkJNuGM4XkWuk94WCrrwslk8yWNGmY1EduTA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <style type="text/css">

        #file-to-upload {
            display: none;
        }
        
        #pdf-loader {
            display: none;
            text-align: center;
            color: #999999;
            font-size: 13px;
            line-height: 100px;
            height: 100px;
        }
        
        #pdf-contents {
            display: none;
        }
    
        
        #pdf-canvas {
            border: 1px solid rgba(0,0,0,0.2);
            box-sizing: border-box;
        }
        
        #page-loader {
            height: 100px;
            line-height: 100px;
            text-align: center;
            display: none;
            color: #999999;
            font-size: 13px;
        }
        
        </style>
    
    <title>Timed - Education Partner</title>
  </head>
  <body>
    <div class="collapse p-2" id="navbarToggleExternalContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 p-1">
            <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
            </li>
            <!-- <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Dropdown
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#">Action</a></li>
                <li><a class="dropdown-item" href="#">Another action</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="#">Something else here</a></li>
            </ul>
            </li>
            <li class="nav-item">
            <a class="nav-link disabled">Disabled</a>
            </li> -->
        </ul>
        <form class="d-flex">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
      <nav class="navbar navbar-dark bg-white text-black shadow-lg w-100">
        <div class="container-fluid d-flex justify-content-between px-lg-5">
            <a class="navbar-brand" href="#">
                <img src="./images/logo.png" alt="" style="width: 116px; height: 60px;">
            </a>
          <!-- <button class="navbar-toggler border border-dark" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation" style="background-color: #6A679E50;">
            <span class="navbar-toggler-icon"></span>
          </button> -->
        </div>
      </nav>
      <!-- <hr> -->
    <div class="container d-flex justify-content-center">
        <div class="d-flex row justify-content-center w-100" id="tests">
            <div class="col-lg-6 col-md-6 col-sm-12 d-grid gap-2 pt-4 px-4 mt-2">
                <button class="btn btn-primary btn-lg" id="show-pdf-button">C++ Test-1</button> 
            </div>
        </div>

        <div class="p-lg-5 p-4 d-flex justify-content-center d-none w-100" id="pdf-main-container" id="test_paper_view" style="width: 100%; max-width: 1000px;">
            <div id="pdf-loader">Loading document ...</div>
            <div id="pdf-contents" class="d-flex flex-column justify-content-center">
                <div id="pdf-meta" class="d-flex justify-content-around align-items-center py-2">
                    <button id="pdf-prev" class="btn btn-primary">Previous</button>
                    <div id="page-count-container">Page <span id="pdf-current-page"></span> of <span id="pdf-total-pages"></span></div>
                    <button id="pdf-next" class="btn btn-primary">Next</button>
                </div>
                <canvas id="pdf-canvas" class=""></canvas>
                <div id="page-loader">Loading page ...</div>

                <div class="d-grid gap-2 p-2">
                    <a type="button" class="btn btn-primary" href="./test_papers/C_Core_Test_CC100.pdf" download="C Test-1">download</a>
                </div>
            </div>
        </div>
    </div>

    <script>

        var _PDF_DOC,
            _CURRENT_PAGE,
            _TOTAL_PAGES,
            _PAGE_RENDERING_IN_PROGRESS = 0,
            _CANVAS = document.querySelector('#pdf-canvas');
        
        // initialize and load the PDF
        async function showPDF(pdf_url) {
            
            document.getElementById('tests').classList.add("d-none");
            document.getElementById('pdf-main-container').classList.remove("d-none");
            document.querySelector("#pdf-loader").style.display = 'block';
        
            // get handle of pdf document
            try {
                _PDF_DOC = await pdfjsLib.getDocument({ url: pdf_url });
            }
            catch(error) {
                alert(error.message);
            }
        
            // total pages in pdf
            _TOTAL_PAGES = _PDF_DOC.numPages;
            
            // Hide the pdf loader and show pdf container
            document.querySelector("#pdf-loader").style.display = 'none';
            document.querySelector("#pdf-contents").style.display = 'block';
            document.querySelector("#pdf-total-pages").innerHTML = _TOTAL_PAGES;
        
            // show the first page
            showPage(1);
        }
        
        // load and render specific page of the PDF
        async function showPage(page_no) {
            _PAGE_RENDERING_IN_PROGRESS = 1;
            _CURRENT_PAGE = page_no;
        
            // disable Previous & Next buttons while page is being loaded
            document.querySelector("#pdf-next").disabled = true;
            document.querySelector("#pdf-prev").disabled = true;
        
            // while page is being rendered hide the canvas and show a loading message
            document.querySelector("#pdf-canvas").style.display = 'none';
            document.querySelector("#page-loader").style.display = 'block';
        
            // update current page
            document.querySelector("#pdf-current-page").innerHTML = page_no;
            
            // get handle of page
            try {
                var page = await _PDF_DOC.getPage(page_no);
            }
            catch(error) {
                alert(error.message);
            }
        
            // original width of the pdf page at scale 1
            var pdf_original_width = page.getViewport(1).width;
            
            // as the canvas is of a fixed width we need to adjust the scale of the viewport where page is rendered
            var scale_required = _CANVAS.width / pdf_original_width;
        
            // get viewport to render the page at required scale
            var viewport = page.getViewport(scale_required);
            // var viewport = page.getViewport(1);
        
            // set canvas height same as viewport height
            _CANVAS.width = viewport.width;
            _CANVAS.height = viewport.height;
        
            // setting page loader height for smooth experience
            document.querySelector("#page-loader").style.height =  _CANVAS.height + 'px';
            document.querySelector("#page-loader").style.lineHeight = _CANVAS.height + 'px';
        
            // page is rendered on <canvas> element
            var render_context = {
                canvasContext: _CANVAS.getContext('2d'),
                viewport: viewport
            };
                
            // render the page contents in the canvas
            try {
                await page.render(render_context);
            }
            catch(error) {
                alert(error.message);
            }
        
            _PAGE_RENDERING_IN_PROGRESS = 0;
        
            // re-enable Previous & Next buttons
            document.querySelector("#pdf-next").disabled = false;
            document.querySelector("#pdf-prev").disabled = false;
        
            // show the canvas and hide the page loader
            document.querySelector("#pdf-canvas").style.display = 'block';
            document.querySelector("#page-loader").style.display = 'none';
        }
        
        // click on "Show PDF" buuton
        document.querySelector("#show-pdf-button").addEventListener('click', function() {
            this.style.display = 'none';
            showPDF('./test_papers/C_Core_Test_CC100.pdf');
        });
        
        // click on the "Previous" page button
        document.querySelector("#pdf-prev").addEventListener('click', function() {
            if(_CURRENT_PAGE != 1)
                showPage(--_CURRENT_PAGE);
        });
        
        // click on the "Next" page button
        document.querySelector("#pdf-next").addEventListener('click', function() {
            if(_CURRENT_PAGE != _TOTAL_PAGES)
                showPage(++_CURRENT_PAGE);
        });
        
        </script>
    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
  </body>
</html>